@model Tourism.Models.Trip
@{
    ViewData["Title"] = "View Trip";
}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<style>
    .custom-label {
        margin-left: 10px;
    }

    .trip-images {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin-top: 15px;
    }

        .trip-images img {
            width: 150px;
            height: 150px;
            object-fit: cover;
            border-radius: 8px;
            border: 2px solid #dee2e6;
        }
</style>
<div class="container mt-4">
    <h2>@Model.name</h2>
    <hr />

    <div class="row mb-3">
        <div class="col-md-4">
            @if (Model.MainImage != null && Model.MainImage.Length > 0)
            {
                <img src="data:image/jpeg;base64,@Convert.ToBase64String(Model.MainImage)" class="img-fluid rounded" alt="Trip Main Image" />
            }
            else
            {
                <p>No image available.</p>
            }

            @if (Model.Images != null && Model.Images.Any())
            {
                <div class="trip-images">
                    @foreach (var img in Model.Images)
                    {
                        <img src="data:image/jpeg;base64,@Convert.ToBase64String(img)" alt="Trip Image" />
                    }
                </div>
            }
        </div>

        <div class="col-md-8">
            <form asp-controller="Admin" method="post" class="mx-auto" style="max-width:600px;">
                <dl class="row">
                    @if (Model.TourGuide != null)
                    {
                        <dt class="col-sm-4">Tour Guide:</dt>
                        <dd class="col-sm-8">@Model.TourGuide.firstName @Model.TourGuide.lastName</dd>
                    }

                    <dt class="col-sm-4">Trip Name:</dt>
                    <dd class="col-sm-8">@Model.name</dd>

                    <dt class="col-sm-4">Destination:</dt>
                    <dd class="col-sm-8">@Model.destination</dd>

                    <dt class="col-sm-4">Trip Type:</dt>
                    <dd class="col-sm-8">@Model.triptype</dd>

                    <dt class="col-sm-4">Cost:</dt>
                    <dd class="col-sm-8">$@Model.cost.ToString("0.00")</dd>

                    <dt class="col-sm-4">Duration:</dt>
                    <dd class="col-sm-8">@Model.Duration days</dd>

                    <dt class="col-sm-4">Start Date:</dt>
                    <dd class="col-sm-8">@Model.StartDate.ToString("dd MMM yyyy")</dd>

                    <dt class="col-sm-4">Capacity:</dt>
                    <dd class="col-sm-8">@Model.Capacity seats</dd>

                    <dt class="col-sm-4">Remaining Seats:</dt>
                    <dd class="col-sm-8">@Model.RemainingSeats</dd>

                    <dt class="col-sm-4">Date Added:</dt>
                    <dd class="col-sm-8">@Model.dateAdded.ToString("dd MMM yyyy")</dd>

                    <input type="hidden" name="serviceId" value="@Model.id" />
                    <input type="hidden" name="providerId" value="@Model.tourGuideId" />
                    <input type="hidden" name="role" value="TourGuide" />

                    <button type="submit"
                            formaction="@Url.Action("AcceptService", "Admin")"
                            class="btn btn-success mb-3" style="width: 400px; margin-left: 11px;">
                        <i class="bi bi-check-circle me-1"></i> Accept
                    </button>

                    <button type="submit"
                            formaction="@Url.Action("RejectService", "Admin")"
                            class="btn btn-danger" style="width: 400px; margin-left: 11px;">
                        <i class="bi bi-x-circle me-1"></i> Reject
                    </button>
                </dl>
            </form>
        </div>
    </div>
</div>
